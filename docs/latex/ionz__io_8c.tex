\hypertarget{ionz__io_8c}{\section{ionz\+\_\+io.\+c File Reference}
\label{ionz__io_8c}\index{ionz\+\_\+io.\+c@{ionz\+\_\+io.\+c}}
}


I\+O operations.  


{\ttfamily \#include \char`\"{}ion.\+h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{ionz__io_8c_ad4ddf14a0a19d8ece8aae44ea4bdc405}{pack\+\_\+3d\+\_\+array\+\_\+mpi\+\_\+transfer} (fftw\+\_\+real $\ast$$\ast$$\ast$input, float $\ast$output, int N1, int N2, int N3)
\item 
void \hyperlink{ionz__io_8c_a951c25f62971884a0b0aa5be6f903569}{unpack\+\_\+3d\+\_\+array\+\_\+mpi\+\_\+transfer} (float $\ast$input, fftw\+\_\+real $\ast$$\ast$$\ast$output, int N1, int N2, int N3)
\item 
void \hyperlink{ionz__io_8c_ae3e7c05c734d4e1b9516a11d79f07366}{pack\+\_\+4d\+\_\+array\+\_\+mpi\+\_\+transfer} (fftw\+\_\+real $\ast$$\ast$$\ast$$\ast$input, float $\ast$output, int Nnion, int N1, int N2, int N3)
\item 
void \hyperlink{ionz__io_8c_a81c6a9dba70c6b44213dc05309f5a8a2}{unpack\+\_\+4d\+\_\+array\+\_\+mpi\+\_\+transfer} (float $\ast$input, fftw\+\_\+real $\ast$$\ast$$\ast$$\ast$output, int Nnion, int N1, int N2, int N3)
\item 
void \hyperlink{ionz__io_8c_ad6241f690f16f77c1f942a96cb4e9e9c}{read\+\_\+density} (char $\ast$filename, float $\ast$buffer\+\_\+3d, double $\ast$robar\+\_\+p, int N1, int N2, int N3, float vomegam, float vomegab)
\item 
void \hyperlink{ionz__io_8c_ad2f727cabe5ba3e264757f33d2d20fdc}{read\+\_\+xfrac} (char $\ast$dirname, float $\ast$buffer\+\_\+4d, float $\ast$nion\+\_\+list, int Nnion, int N1, int N2, int N3)
\item 
void \hyperlink{ionz__io_8c_af0be7fa625cefb590988fcd6088eba60}{read\+\_\+sources} (char $\ast$filename, float $\ast$buffer\+\_\+3d, double $\ast$robarhalo\+\_\+p, int N1, int N2, int N3)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
I\+O operations. 

\begin{DoxyAuthor}{Author}
Chaichalit Srisawat $<$ \href{mailto:boyd.srisawat@gmail.com}{\tt boyd.\+srisawat@gmail.\+com}$>$ 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
Sat Oct 11 21\+:44\+:53 2014 
\end{DoxyDate}


\subsection{Function Documentation}
\hypertarget{ionz__io_8c_ad4ddf14a0a19d8ece8aae44ea4bdc405}{\index{ionz\+\_\+io.\+c@{ionz\+\_\+io.\+c}!pack\+\_\+3d\+\_\+array\+\_\+mpi\+\_\+transfer@{pack\+\_\+3d\+\_\+array\+\_\+mpi\+\_\+transfer}}
\index{pack\+\_\+3d\+\_\+array\+\_\+mpi\+\_\+transfer@{pack\+\_\+3d\+\_\+array\+\_\+mpi\+\_\+transfer}!ionz\+\_\+io.\+c@{ionz\+\_\+io.\+c}}
\subsubsection[{pack\+\_\+3d\+\_\+array\+\_\+mpi\+\_\+transfer}]{\setlength{\rightskip}{0pt plus 5cm}void pack\+\_\+3d\+\_\+array\+\_\+mpi\+\_\+transfer (
\begin{DoxyParamCaption}
\item[{fftw\+\_\+real $\ast$$\ast$$\ast$}]{input, }
\item[{float $\ast$}]{output, }
\item[{int}]{N1, }
\item[{int}]{N2, }
\item[{int}]{N3}
\end{DoxyParamCaption}
)}}\label{ionz__io_8c_ad4ddf14a0a19d8ece8aae44ea4bdc405}
Convert 3\+D-\/fftw\+\_\+real array to 1\+D-\/float array. This is used to simplify M\+P\+I transfer process.


\begin{DoxyParams}{Parameters}
{\em input} & 3\+D-\/fftw\+\_\+real array input \\
\hline
{\em output} & 1\+D-\/float array output \\
\hline
{\em N1} & 1st dimension grid number \\
\hline
{\em N2} & 2nd dimension grid number \\
\hline
{\em N3} & 3rd dimension grid number \\
\hline
\end{DoxyParams}
\hypertarget{ionz__io_8c_ae3e7c05c734d4e1b9516a11d79f07366}{\index{ionz\+\_\+io.\+c@{ionz\+\_\+io.\+c}!pack\+\_\+4d\+\_\+array\+\_\+mpi\+\_\+transfer@{pack\+\_\+4d\+\_\+array\+\_\+mpi\+\_\+transfer}}
\index{pack\+\_\+4d\+\_\+array\+\_\+mpi\+\_\+transfer@{pack\+\_\+4d\+\_\+array\+\_\+mpi\+\_\+transfer}!ionz\+\_\+io.\+c@{ionz\+\_\+io.\+c}}
\subsubsection[{pack\+\_\+4d\+\_\+array\+\_\+mpi\+\_\+transfer}]{\setlength{\rightskip}{0pt plus 5cm}void pack\+\_\+4d\+\_\+array\+\_\+mpi\+\_\+transfer (
\begin{DoxyParamCaption}
\item[{fftw\+\_\+real $\ast$$\ast$$\ast$$\ast$}]{input, }
\item[{float $\ast$}]{output, }
\item[{int}]{Nnion, }
\item[{int}]{N1, }
\item[{int}]{N2, }
\item[{int}]{N3}
\end{DoxyParamCaption}
)}}\label{ionz__io_8c_ae3e7c05c734d4e1b9516a11d79f07366}
Convert 3\+D-\/fftw\+\_\+real array to 1\+D-\/float array. This is used to simplify M\+P\+I transfer process.


\begin{DoxyParams}{Parameters}
{\em input} & 3\+D-\/fftw\+\_\+real array output \\
\hline
{\em output} & 1\+D-\/float array input \\
\hline
{\em Nion} & Number of the choices of total reionizing photons/neutral baryon \\
\hline
{\em N1} & 1st dimension grid number \\
\hline
{\em N2} & 2nd dimension grid number \\
\hline
{\em N3} & 3rd dimension grid number \\
\hline
\end{DoxyParams}
\hypertarget{ionz__io_8c_ad6241f690f16f77c1f942a96cb4e9e9c}{\index{ionz\+\_\+io.\+c@{ionz\+\_\+io.\+c}!read\+\_\+density@{read\+\_\+density}}
\index{read\+\_\+density@{read\+\_\+density}!ionz\+\_\+io.\+c@{ionz\+\_\+io.\+c}}
\subsubsection[{read\+\_\+density}]{\setlength{\rightskip}{0pt plus 5cm}void read\+\_\+density (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{filename, }
\item[{float $\ast$}]{buffer\+\_\+3d, }
\item[{double $\ast$}]{robar\+\_\+p, }
\item[{int}]{N1, }
\item[{int}]{N2, }
\item[{int}]{N3, }
\item[{float}]{vomegam, }
\item[{float}]{vomegab}
\end{DoxyParamCaption}
)}}\label{ionz__io_8c_ad6241f690f16f77c1f942a96cb4e9e9c}
Read in density of matter in cubep3m format (Fortran binary)


\begin{DoxyParams}{Parameters}
{\em filename} & Filename (char$\ast$ input) \\
\hline
{\em buffer\+\_\+3d} & Output buffer\mbox{[}N1$\ast$\+N2$\ast$\+N3\mbox{]} \\
\hline
{\em robar\+\_\+p} & Average density of baryons (output) \\
\hline
{\em N1} & 1st dimension grid (input) \\
\hline
{\em N2} & 2nd dimension grid (input) \\
\hline
{\em N3} & 3rd dimension grid (input) \\
\hline
{\em vomegam} & Omega\+\_\+matter (input) \\
\hline
{\em vomegab} & Omega\+\_\+baryon (input) \\
\hline
\end{DoxyParams}
\hypertarget{ionz__io_8c_af0be7fa625cefb590988fcd6088eba60}{\index{ionz\+\_\+io.\+c@{ionz\+\_\+io.\+c}!read\+\_\+sources@{read\+\_\+sources}}
\index{read\+\_\+sources@{read\+\_\+sources}!ionz\+\_\+io.\+c@{ionz\+\_\+io.\+c}}
\subsubsection[{read\+\_\+sources}]{\setlength{\rightskip}{0pt plus 5cm}void read\+\_\+sources (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{filename, }
\item[{float $\ast$}]{buffer\+\_\+3d, }
\item[{double $\ast$}]{robarhalo\+\_\+p, }
\item[{int}]{N1, }
\item[{int}]{N2, }
\item[{int}]{N3}
\end{DoxyParamCaption}
)}}\label{ionz__io_8c_af0be7fa625cefb590988fcd6088eba60}
Read sources list. The data will be the S\+F\+R in cubep3m\+\_\+gridmass/year


\begin{DoxyParams}{Parameters}
{\em filename} & Filename (char$\ast$ input) \\
\hline
{\em buffer\+\_\+3d} & Output buffer\mbox{[}N1$\ast$\+N2$\ast$\+N3\mbox{]} \\
\hline
{\em robar\+\_\+p} & Average density of photons (output) \\
\hline
{\em N1} & 1st dimension grid (input) \\
\hline
{\em N2} & 2nd dimension grid (input) \\
\hline
{\em N3} & 3rd dimension grid (input) \\
\hline
\end{DoxyParams}
\hypertarget{ionz__io_8c_ad2f727cabe5ba3e264757f33d2d20fdc}{\index{ionz\+\_\+io.\+c@{ionz\+\_\+io.\+c}!read\+\_\+xfrac@{read\+\_\+xfrac}}
\index{read\+\_\+xfrac@{read\+\_\+xfrac}!ionz\+\_\+io.\+c@{ionz\+\_\+io.\+c}}
\subsubsection[{read\+\_\+xfrac}]{\setlength{\rightskip}{0pt plus 5cm}void read\+\_\+xfrac (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{dirname, }
\item[{float $\ast$}]{buffer\+\_\+4d, }
\item[{float $\ast$}]{nion\+\_\+list, }
\item[{int}]{Nnion, }
\item[{int}]{N1, }
\item[{int}]{N2, }
\item[{int}]{N3}
\end{DoxyParamCaption}
)}}\label{ionz__io_8c_ad2f727cabe5ba3e264757f33d2d20fdc}
Read in the history of ionized fraction (previous snapshot).


\begin{DoxyParams}{Parameters}
{\em dirname} & Directory of the xh (input) \\
\hline
{\em buffer\+\_\+4d} & 4\+D float output \\
\hline
{\em nion\+\_\+list} & List of minimum N\+\_\+gamma/\+N\+\_\+b (input) \\
\hline
{\em Nnion} & Number of elements in nion\+\_\+list \\
\hline
{\em N1} & 1st dimension grid (input) \\
\hline
{\em N2} & 2nd dimension grid (input) \\
\hline
{\em N3} & 3rd dimension grid (input) \\
\hline
\end{DoxyParams}
\hypertarget{ionz__io_8c_a951c25f62971884a0b0aa5be6f903569}{\index{ionz\+\_\+io.\+c@{ionz\+\_\+io.\+c}!unpack\+\_\+3d\+\_\+array\+\_\+mpi\+\_\+transfer@{unpack\+\_\+3d\+\_\+array\+\_\+mpi\+\_\+transfer}}
\index{unpack\+\_\+3d\+\_\+array\+\_\+mpi\+\_\+transfer@{unpack\+\_\+3d\+\_\+array\+\_\+mpi\+\_\+transfer}!ionz\+\_\+io.\+c@{ionz\+\_\+io.\+c}}
\subsubsection[{unpack\+\_\+3d\+\_\+array\+\_\+mpi\+\_\+transfer}]{\setlength{\rightskip}{0pt plus 5cm}void unpack\+\_\+3d\+\_\+array\+\_\+mpi\+\_\+transfer (
\begin{DoxyParamCaption}
\item[{float $\ast$}]{input, }
\item[{fftw\+\_\+real $\ast$$\ast$$\ast$}]{output, }
\item[{int}]{N1, }
\item[{int}]{N2, }
\item[{int}]{N3}
\end{DoxyParamCaption}
)}}\label{ionz__io_8c_a951c25f62971884a0b0aa5be6f903569}
Convert 1\+D-\/float array to 3\+D-\/fftw\+\_\+real array. This is used to simplify M\+P\+I transfer process.


\begin{DoxyParams}{Parameters}
{\em input} & 1\+D-\/float array input \\
\hline
{\em output} & 3\+D-\/fftw\+\_\+real array output \\
\hline
{\em N1} & 1st dimension grid number \\
\hline
{\em N2} & 2nd dimension grid number \\
\hline
{\em N3} & 3rd dimension grid number \\
\hline
\end{DoxyParams}
\hypertarget{ionz__io_8c_a81c6a9dba70c6b44213dc05309f5a8a2}{\index{ionz\+\_\+io.\+c@{ionz\+\_\+io.\+c}!unpack\+\_\+4d\+\_\+array\+\_\+mpi\+\_\+transfer@{unpack\+\_\+4d\+\_\+array\+\_\+mpi\+\_\+transfer}}
\index{unpack\+\_\+4d\+\_\+array\+\_\+mpi\+\_\+transfer@{unpack\+\_\+4d\+\_\+array\+\_\+mpi\+\_\+transfer}!ionz\+\_\+io.\+c@{ionz\+\_\+io.\+c}}
\subsubsection[{unpack\+\_\+4d\+\_\+array\+\_\+mpi\+\_\+transfer}]{\setlength{\rightskip}{0pt plus 5cm}void unpack\+\_\+4d\+\_\+array\+\_\+mpi\+\_\+transfer (
\begin{DoxyParamCaption}
\item[{float $\ast$}]{input, }
\item[{fftw\+\_\+real $\ast$$\ast$$\ast$$\ast$}]{output, }
\item[{int}]{Nnion, }
\item[{int}]{N1, }
\item[{int}]{N2, }
\item[{int}]{N3}
\end{DoxyParamCaption}
)}}\label{ionz__io_8c_a81c6a9dba70c6b44213dc05309f5a8a2}
Convert 1\+D-\/float array to 3\+D-\/fftw\+\_\+real array. This is used to simplify M\+P\+I transfer process.


\begin{DoxyParams}{Parameters}
{\em input} & 1\+D-\/float array input \\
\hline
{\em output} & 3\+D-\/fftw\+\_\+real array output \\
\hline
{\em Nion} & Number of the choices of total reionizing photons/neutral baryon \\
\hline
{\em N1} & 1st dimension grid number \\
\hline
{\em N2} & 2nd dimension grid number \\
\hline
{\em N3} & 3rd dimension grid number \\
\hline
\end{DoxyParams}
